<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Header Component</title>
    <!--===================G=S=A=P====================-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"
      integrity="sha512-NcZdtrT77bJr4STcmsGAESr06BYGE8woZdSdEgqnpyqac7sugNO+Tr4bGwGF3MsnEkGKhU2KL2xh6Ec+BqsaHA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js"
      integrity="sha512-P2IDYZfqSwjcSjX0BKeNhwRUH8zRPGlgcWl5n6gBLzdi4Y5/0O4zaXrtO4K9TZK6Hn1BenYpKowuCavNandERg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <style>
      /* ========================================
         헤더 및 네비게이션 (Header & Navigation)
      ======================================== */
      #main-header {
        position: fixed;
        top: 10%;
        left: 0;
        width: 100%;
        z-index: 1000;
        background: transparent;
        backdrop-filter: none;
        opacity: 1;
        transform: translateY(0);
        transition: background-color 0.4s ease, backdrop-filter 0.4s ease,
          transform 0.5s cubic-bezier(0.65, 0.05, 0.36, 1),
          opacity 0.5s cubic-bezier(0.65, 0.05, 0.36, 1);
        padding: 1rem 0;
      }

      #main-header.header-scrolled {
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }

      #main-header.header-hidden {
        transform: translateY(-100%);
        opacity: 0;
        transition: transform 0.5s ease, opacity 0.5s ease;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 90%;
        border: 1px solid #222;
        border-radius: 50px;
        background-color: #ffffff34;
        margin: 0 auto;
        padding: 0 2rem;
      }

      .logo {
        text-decoration: none;
      }

      .logo img {
        height: 50px;
        transition: transform 0.3s ease;
      }

      .logo:hover img,
      .logo:focus img {
        transform: scale(1.05);
      }

      /* 네비게이션 구름 배경 */
      .nav-container .cloud-container {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: -1;
      }
      .nav-container .cloud-container .ps {
        position: absolute;
        width: 80px;
        animation: float 4s ease-in-out infinite;
      }
      .nav-container .cloud-container .ps1 {
        top: -40px;
        left: 45%;
        animation-delay: 2s;
      }
      .nav-container .cloud-container .ps2 {
        top: -25px;
        right: 20%;
        animation-delay: 1s;
      }
      .nav-container .cloud-container .ps3 {
        top: -30px;
        left: 25%;
        animation-delay: 0s;
      }

      /* 데스크탑 네비게이션 */
      .desktop-nav {
        display: flex;
        gap: 2rem;
        list-style: none;
      }

      .desktop-nav a {
        color: #333;
        text-decoration: none;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        padding: 0.5rem 1rem;
        border-radius: 20px;
      }

      .desktop-nav a:hover,
      .desktop-nav a:focus {
        color: #ff6b6b;
        background: rgba(255, 107, 107, 0.1);
        transform: translateY(-2px);
        outline: none;
      }

      .desktop-nav a::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 0;
        height: 2px;
        background: #ff6b6b;
        transition: all 0.3s ease;
        transform: translateX(-50%);
      }

      .desktop-nav a:hover::after,
      .desktop-nav a:focus::after {
        width: 80%;
      }

      .desktop-nav a.nav-active {
        color: #ff6b6b;
        background: rgba(255, 107, 107, 0.1);
      }

      /* Contact 버튼 */
      .btnWrap {
        width: 200px;
        position: relative;
        right: 5%;
        display: inline-block;
      }

      .contactTxt {
        position: absolute;
        top: 0;
        right: 0;
        background-color: skyblue;
        border-radius: 30px;
        padding: 0.8rem 1.5rem;
        color: #333;
        display: none;
        width: 300px;
      }
      .contactBtn {
        position: absolute;
        top: 5%;
        right: 0;
        z-index: 10;
        padding: 0.8rem 1.5rem;
        background-color: #222;
        color: #f5f5f5;
        border: none;
        border-radius: 30px;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.3s ease;
      }

      .btnWrap:hover .contactTxt {
        display: block;
        font-size: 0.9rem;
        margin-top: 0.5rem;
        animation: fadeIn 0.3s ease forwards;
      }
      .contactBtn:hover,
      .contactBtn:focus {
        background-color: #ff6b6b;
        transform: rotate(40deg);
        transform-origin: right;
        outline: 2px solid #fff;
      }

      /* 모바일 네비게이션 (햄버거) */
      .hamburger-menu {
        width: 30px;
        height: 22px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        cursor: pointer;
        z-index: 1002;
      }

      .hamburger-menu span {
        width: 100%;
        height: 3px;
        background-color: #111;
        transition: all 0.3s ease;
        z-index: 1003;
      }

      .hamburger-menu.active span:nth-child(1) {
        transform: translateY(9.5px) rotate(45deg);
      }
      .hamburger-menu.active span:nth-child(2) {
        opacity: 0;
      }
      .hamburger-menu.active span:nth-child(3) {
        transform: translateY(-9.5px) rotate(-45deg);
      }

      .mobile-nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(255, 255, 255, 0.2); /* 글라스모피즘 배경 */
        backdrop-filter: blur(15px); /* 블러 효과 */
        -webkit-backdrop-filter: blur(15px); /* Safari 브라우저 호환성 */
        z-index: 1001;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 2rem;
        transform: translateX(100%);
        transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
        visibility: hidden;
      }

      .mobile-nav.active {
        transform: translateX(0);
        visibility: visible;
      }

      .mobile-nav a {
        font-size: 1.5rem;
        font-weight: bold;
        color: #333;
        text-decoration: none;
        opacity: 0;
        transform: translateX(-50px);
        transition: all 0.3s ease;
        padding: 1rem 2rem;
        border-radius: 30px;
        position: relative;
      }

      .mobile-nav a:hover,
      .mobile-nav a:focus {
        color: #ff6b6b;
        background: rgba(255, 107, 107, 0.1);
        transform: translateX(0) scale(1.05);
        outline: 2px solid #333;
        outline-offset: 4px;
      }

      .mobile-nav a.nav-active {
        color: #ff6b6b;
        background: rgba(255, 107, 107, 0.1);
      }

      body.nav-open .logo {
        opacity: 0;
        transition: opacity 0.3s;
      }

      body.nav-open #main-header {
        z-index: 1002;
      }

      /* ========================================
         애니메이션 정의 (Keyframes)
      ======================================== */
      @keyframes float {
        0% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-0.9375rem) scale(1.1);
        }
        100% {
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ========================================
         반응형 (Responsive)
      ======================================== */
      @media (max-width: 768px) {
        .nav-container {
          padding: 0 1rem;
        }
        .logo img {
          height: 40px;
        }
        .desktop-nav {
          display: none;
        }
        .hamburger-menu {
          display: flex;
        }
        .mobile-nav {
          display: flex;
        }
      }

      @media (min-width: 769px) {
        .hamburger-menu {
          display: none;
        }
        .desktop-nav {
          display: flex;
        }
        .mobile-nav {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <header id="main-header">
      <div class="nav-container">
        <div class="cloud-container">
          <img class="ps ps1" src="images/sun.png" alt="sun" />
          <img class="ps ps2" src="images/cloud-1.png" alt="cloud-1" />
          <img class="ps ps3" src="images/cloud-2.png" alt="cloud-2" />
        </div>
        <a href="index.html" class="logo">
          <img src="../images/logo_bk.png" alt="J-PUPPET" />
        </a>
        <nav class="desktop-nav">
          <a href="about.html" class="nav-link">ABOUT</a>
          <a href="musical.html" class="nav-link">MUSICAL</a>
          <a href="creative.html" class="nav-link">CREATIVE</a>
          <a href="community.html" class="nav-link">COMMUNITY</a>
          <div class="btnWrap">
            <button class="contactBtn" aria-label="문의하기">CONTACT</button>
            <p class="contactTxt">어떤 프로젝트를 함께 하시겠어요?</p>
          </div>
        </nav>
        <div
          class="hamburger-menu"
          role="button"
          aria-label="메뉴 열기"
          tabindex="0"
        >
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </header>

    <!-- Mobile Navigation Menu -->
    <nav class="mobile-nav">
      <a href="about.html" class="nav-link">ABOUT</a>
      <a href="musical.html" class="nav-link">MUSICAL</a>
      <a href="creative.html" class="nav-link">CREATIVE</a>
      <a href="community.html" class="nav-link">COMMUNITY</a>
      <a href="contact.html" class="nav-link">CONTACT</a>
    </nav>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        /* ======================================
         * Header Scroll Behavior
         * ====================================== */
        const header = document.getElementById("main-header");
        let lastScrollTop = 0;
        const scrollThreshold = 10;
        const hideThreshold = 5;

        if (header) {
          window.addEventListener(
            "scroll",
            function () {
              let currentScroll =
                window.scrollY || document.documentElement.scrollTop;

              if (currentScroll > scrollThreshold) {
                header.classList.add("header-scrolled");
              } else {
                header.classList.remove("header-scrolled");
              }

              if (
                Math.abs(currentScroll - lastScrollTop) > hideThreshold &&
                currentScroll > scrollThreshold
              ) {
                if (currentScroll > lastScrollTop) {
                  header.classList.add("header-hidden");
                } else {
                  header.classList.remove("header-hidden");
                }
              }

              lastScrollTop = currentScroll;
            },
            false
          );
        }

        /* ======================================
         * Mobile Navigation
         * ====================================== */
        const hamburger = document.querySelector(".hamburger-menu");
        const mobileNav = document.querySelector(".mobile-nav");
        const mobileNavLinks = document.querySelectorAll(".mobile-nav a");

        if (hamburger && mobileNav) {
          function toggleMobileNav() {
            hamburger.classList.toggle("active");
            mobileNav.classList.toggle("active");
            document.body.classList.toggle("nav-open");

            if (mobileNav.classList.contains("active")) {
              // GSAP is not included here, so we use simple CSS transitions
              gsap.to(".mobile-nav a", {
                opacity: 1,
                x: 0,
                duration: 0.6,
                stagger: 0.1,
                ease: "power3.out",
                delay: 0.3,
              });
            } else {
              // GSAP is not included here, so we use simple CSS transitions
              gsap.to(".mobile-nav a", {
                opacity: 0,
                x: -50,
                duration: 0.3,
                stagger: 0.05,
              });
            }
          }

          hamburger.addEventListener("click", toggleMobileNav);

          hamburger.addEventListener("keypress", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              toggleMobileNav();
            }
          });

          mobileNavLinks.forEach((link) => {
            link.addEventListener("click", toggleMobileNav);
          });
        }
      });
    </script>
  </body>
</html>
